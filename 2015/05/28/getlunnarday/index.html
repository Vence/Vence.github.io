<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>根据阳历日期获取农历日期 | 王文路的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="以下程序基于Jquery实现的阴阳历的转换功能，尤其是在实现日程日历管理的时候，阴阳历转换功能是比较常见的。只要将以下内容拷贝到自己的程序中，使用的时候只要调用
test._helper.GetLunarDay（&amp;quot;2015&amp;quot;, &amp;quot;05&amp;quot;,&amp;quot;27&amp;quot;）；
输出
四月初十
GetLunarDay.js
var test = (function(">
<meta property="og:type" content="article">
<meta property="og:title" content="根据阳历日期获取农历日期">
<meta property="og:url" content="http://yoursite.com/2015/05/28/getlunnarday/index.html">
<meta property="og:site_name" content="王文路的博客">
<meta property="og:description" content="以下程序基于Jquery实现的阴阳历的转换功能，尤其是在实现日程日历管理的时候，阴阳历转换功能是比较常见的。只要将以下内容拷贝到自己的程序中，使用的时候只要调用
test._helper.GetLunarDay（&amp;quot;2015&amp;quot;, &amp;quot;05&amp;quot;,&amp;quot;27&amp;quot;）；
输出
四月初十
GetLunarDay.js
var test = (function(">
<meta property="og:updated_time" content="2016-04-21T01:26:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="根据阳历日期获取农历日期">
<meta name="twitter:description" content="以下程序基于Jquery实现的阴阳历的转换功能，尤其是在实现日程日历管理的时候，阴阳历转换功能是比较常见的。只要将以下内容拷贝到自己的程序中，使用的时候只要调用
test._helper.GetLunarDay（&amp;quot;2015&amp;quot;, &amp;quot;05&amp;quot;,&amp;quot;27&amp;quot;）；
输出
四月初十
GetLunarDay.js
var test = (function(">
  
    <link rel="alternative" href="/atom.xml" title="王文路的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://i2.piimg.com/62a5ce5907610d14.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">王文路</a></h1>
		</hgroup>

		
		<p class="header-subtitle">自弃者扶不起，自强者击不倒</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://github.com/Vence" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/my0love" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/aop/" style="font-size: 10px;">aop</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 12.5px;">blog</a> <a href="/tags/cluster/" style="font-size: 12.5px;">cluster</a> <a href="/tags/file/" style="font-size: 12.5px;">file</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hibernate/" style="font-size: 10px;">hibernate</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/mybatis/" style="font-size: 12.5px;">mybatis</a> <a href="/tags/myeclipse/" style="font-size: 10px;">myeclipse</a> <a href="/tags/octopress/" style="font-size: 10px;">octopress</a> <a href="/tags/patent/" style="font-size: 20px;">patent</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/recource/" style="font-size: 10px;">recource</a> <a href="/tags/requirejs/" style="font-size: 10px;">requirejs</a> <a href="/tags/spring/" style="font-size: 17.5px;">spring</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/web/" style="font-size: 17.5px;">web</a> <a href="/tags/webservice/" style="font-size: 10px;">webservice</a> <a href="/tags/压力测试/" style="font-size: 12.5px;">压力测试</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">生命就像那空中白色的羽毛，或迎风搏击，或随风飘荡，或翱翔蓝天，或坠入深渊...</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">王文路</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://i2.piimg.com/62a5ce5907610d14.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">王文路</h1>
			</hgroup>
			
			<p class="header-subtitle">自弃者扶不起，自强者击不倒</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://github.com/Vence" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/my0love" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-getlunnarday" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/28/getlunnarday/" class="article-date">
  	<time datetime="2015-05-28T01:31:11.000Z" itemprop="datePublished">2015-05-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      根据阳历日期获取农历日期
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以下程序基于Jquery实现的阴阳历的转换功能，尤其是在实现日程日历管理的时候，阴阳历转换功能是比较常见的。只要将以下内容拷贝到自己的程序中，使用的时候只要调用</p>
<pre><code>test._helper.GetLunarDay（&quot;2015&quot;, &quot;05&quot;,&quot;27&quot;）；
</code></pre><p>输出</p>
<pre><code>四月初十
</code></pre><p>GetLunarDay.js</p>
<pre><code>var test = (function($) {

        var test = {};

        test._helper = {};

        test._helper.GetLunarDay =  function(YearStr, MonthStr, DayStr) {
            var sDObj = new Date(parseInt(YearStr), parseInt(MonthStr) - 1,
                    parseInt(DayStr));
            var lDObj = new Lunar(sDObj) ;//农历   
            return cMonth(lDObj.month) + cDay(lDObj.day);
        }

        var lunarInfo = new Array(0x04bd8, 0x04ae0, 0x0a570, 0x054d5,
                0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,
                0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540,
                0x0d6a0, 0x0ada2, 0x095b0, 0x14977, 0x04970, 0x0a4b0,
                0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570,
                0x052f2, 0x04970, 0x06566, 0x0d4a0, 0x0ea50, 0x06e95,
                0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,
                0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0,
                0x092d0, 0x0d2b2, 0x0a950, 0x0b557, 0x06ca0, 0x0b550,
                0x15355, 0x04da0, 0x0a5d0, 0x14573, 0x052d0, 0x0a9a8,
                0x0e950, 0x06aa0, 0x0aea6, 0x0ab50, 0x04b60, 0x0aae4,
                0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0,
                0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250,
                0x0d558, 0x0b540, 0x0b5a0, 0x195a6, 0x095b0, 0x049b0,
                0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46,
                0x0ab60, 0x09570, 0x04af5, 0x04970, 0x064b0, 0x074a3,
                0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0,
                0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0,
                0x0abb7, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0,
                0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176,
                0x052b0, 0x0a930, 0x07954, 0x06aa0, 0x0ad50, 0x05b52,
                0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530,
                0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0,
                0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0,
                0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255,
                0x06d20, 0x0ada0)

        var solarMonth = new Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31,
                30, 31);
        var Gan = new Array(&quot;甲&quot;, &quot;乙&quot;, &quot;丙&quot;, &quot;丁&quot;, &quot;戊&quot;, &quot;己&quot;, &quot;庚&quot;, &quot;辛&quot;, &quot;壬&quot;,
                &quot;癸&quot;);
        var Zhi = new Array(&quot;子&quot;, &quot;丑&quot;, &quot;寅&quot;, &quot;卯&quot;, &quot;辰&quot;, &quot;巳&quot;, &quot;午&quot;, &quot;未&quot;, &quot;申&quot;,
                &quot;酉&quot;, &quot;戌&quot;, &quot;亥&quot;);
        var Animals = new Array(&quot;鼠&quot;, &quot;牛&quot;, &quot;虎&quot;, &quot;兔&quot;, &quot;龙&quot;, &quot;蛇&quot;, &quot;马&quot;, &quot;羊&quot;,
                &quot;猴&quot;, &quot;鸡&quot;, &quot;狗&quot;, &quot;猪&quot;);
        var solarTerm = new Array(&quot;小寒&quot;, &quot;大寒&quot;, &quot;立春&quot;, &quot;雨水&quot;, &quot;惊蛰&quot;, &quot;春分&quot;, &quot;清明&quot;,
                &quot;谷雨&quot;, &quot;立夏&quot;, &quot;小满&quot;, &quot;芒种&quot;, &quot;夏至&quot;, &quot;小暑&quot;, &quot;大暑&quot;, &quot;立秋&quot;, &quot;处暑&quot;, &quot;白露&quot;,
                &quot;秋分&quot;, &quot;寒露&quot;, &quot;霜降&quot;, &quot;立冬&quot;, &quot;小雪&quot;, &quot;大雪&quot;, &quot;冬至&quot;)
        var sTermInfo = new Array(0, 21208, 42467, 63836, 85337, 107014,
                128867, 150921, 173149, 195551, 218072, 240693, 263343,
                285989, 308563, 331033, 353350, 375494, 397447, 419210,
                440795, 462224, 483532, 504758)
        var nStr1 = new Array(&apos;日&apos;, &apos;一&apos;, &apos;二&apos;, &apos;三&apos;, &apos;四&apos;, &apos;五&apos;, &apos;六&apos;, &apos;七&apos;, &apos;八&apos;,
                &apos;九&apos;, &apos;十&apos;);
        var nStr2 = new Array(&apos;初&apos;, &apos;十&apos;, &apos;廿&apos;, &apos;卅&apos;, &apos;　&apos;);
        var monthName = new Array(&quot;JAN&quot;, &quot;FEB&quot;, &quot;MAR&quot;, &quot;APR&quot;, &quot;MAY&quot;, &quot;JUN&quot;,
                &quot;JUL&quot;, &quot;AUG&quot;, &quot;SEP&quot;, &quot;OCT&quot;, &quot;NOV&quot;, &quot;DEC&quot;);

        /*****************************************************************************   
                       日期计算   
         *****************************************************************************/

        //======================================   传回农历   y年的总天数   
        function lYearDays(y) {
            var i, sum = 348
            for (i = 0x8000; i &gt; 0x8; i &gt;&gt;= 1)
                sum += (lunarInfo[y - 1900] &amp; i) ? 1 : 0
            return (sum + leapDays(y))
        }

        //======================================   传回农历   y年闰月的天数   
        function leapDays(y) {
            if (leapMonth(y))
                return ((lunarInfo[y - 1900] &amp; 0x10000) ? 30 : 29)
            else
                return (0);
        }

        //======================================   传回农历   y年闰哪个月   1-12   ,   没闰传回   0   
        function leapMonth(y) {
            return (lunarInfo[y - 1900] &amp; 0xf);
        }

        //======================================   传回农历   y年m月的总天数   
        function monthDays(y, m) {
            return ((lunarInfo[y - 1900] &amp; (0x10000 &gt;&gt; m)) ? 30 : 29);
        }

        //======================================   算出农历,   传入日期物件,   传回农历日期物件   
        //                                                                               该物件属性有   .year   .month   .day   .isLeap   .yearCyl   .dayCyl   .monCyl   
        function Lunar(objDate) {

            var i, leap = 0, temp = 0;
            var baseDate = new Date(1900, 0, 31);
            var offset = (objDate - baseDate) / 86400000;

            this.dayCyl = offset + 40;
            this.monCyl = 14;

            for (i = 1900; i &lt; 2050 &amp;&amp; offset &gt; 0; i++) {
                temp = lYearDays(i);
                offset -= temp
                this.monCyl += 12;
            }

            if (offset &lt; 0) {
                offset += temp;
                i--;
                this.monCyl -= 12;
            }

            this.year = i;
            this.yearCyl = i - 1864;

            leap = leapMonth(i); //闰哪个月   
            this.isLeap = false;

            for (i = 1; i &lt; 13 &amp;&amp; offset &gt; 0; i++) {
                //闰月   
                if (leap &gt; 0 &amp;&amp; i == (leap + 1) &amp;&amp; this.isLeap == false) {
                    --i;
                    this.isLeap = true;
                    temp = leapDays(this.year);
                } else {
                    temp = monthDays(this.year, i);
                }

                //解除闰月   
                if (this.isLeap == true &amp;&amp; i == (leap + 1))
                    this.isLeap = false;

                offset -= temp;
                if (this.isLeap == false)
                    this.monCyl++;
            }

            if (offset == 0 &amp;&amp; leap &gt; 0 &amp;&amp; i == leap + 1)
                if (this.isLeap) {
                    this.isLeap = false;
                } else {
                    this.isLeap = true;
                    --i;
                    --this.monCyl;
                }

            if (offset &lt; 0) {
                offset += temp;
                --i;
                --this.monCyl;
            }

            this.month = i;
            this.day = offset + 1;
        }

        //==============================传回国历   y年某m+1月的天数   
        function solarDays(y, m) {
            if (m == 1)
                return (((y % 4 == 0) &amp;&amp; (y % 100 != 0) || (y % 400 == 0)) ? 29
                        : 28);
            else
                return (solarMonth[m]);
        }
        //==============================   传入   offset   传回干支,   0=甲子   
        function cyclical(num) {
            return (Gan[num % 10] + Zhi[num % 12])
        }

        //======================   中文日期   
        function cDay(d) {
            var s;

            switch (d) {
            case 10:
                s = &apos;初十&apos;;
                break;
            case 20:
                s = &apos;二十&apos;;
                break;
            break;
        case 30:
            s = &apos;三十&apos;;
            break;
        break;
    default:
        s = nStr2[Math.floor(d / 10)];
        s += nStr1[d % 10];
    }
    return (s);
}
//======================   中文月份   
function cMonth(m) {
    var s;

    switch (m) {
    case 1:
        s = &apos;正月&apos;;
        break;
    case 2:
        s = &apos;二月&apos;;
        break;
    case 3:
        s = &apos;三月&apos;;
        break;
    case 4:
        s = &apos;四月&apos;;
        break;
    case 5:
        s = &apos;五月&apos;;
        break;
    case 6:
        s = &apos;六月&apos;;
        break;
    case 7:
        s = &apos;七月&apos;;
        break;
    case 8:
        s = &apos;八月&apos;;
        break;
    case 9:
        s = &apos;九月&apos;;
        break;
    case 10:
        s = &apos;十月&apos;;
        break;
    case 11:
        s = &apos;十一月&apos;;
        break;
    case 12:
        s = &apos;十二月&apos;;
        break;
    default:
        break;
    }
    return (s);
}

return teworks;
})（jQuery）;
</code></pre>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/28/webservice-resource/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          WebService资源整理
        
      </div>
    </a>
  
  
    <a href="/2015/05/24/inform-email-info/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">JavaMail发送邮件</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 王文路
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>